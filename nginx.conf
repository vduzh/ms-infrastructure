events {}

http {
    upstream profiles_service {
        server host.docker.internal:9980;  # —Å–µ—Ä–≤–∏—Å –Ω–∞ —Ö–æ—Å—Ç–µ
    }

#     upstream cards_service {
#         server cards:9981;
#     }

    server {
        listen 80;

        location /api/v1/dating/profiles {
            proxy_pass http://profiles_service;

            # –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Å–µ—Ä–≤–∏—Å–∞ –≤–Ω–µ –¥–æ–∫–µ—Ä–∞!!!
            proxy_set_header Host localhost;  # üëà –≤–∞–∂–Ω–æ!
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

#         location /api/v1/dating/cards {
#             proxy_pass http://cards_service;
#         }
    }
}
